(()=>{"use strict";const e=(()=>{const e=document.getElementById("infoContainer"),a=document.getElementById("cityTitle"),t=document.getElementById("weatherTitle"),d=document.querySelectorAll(".indivInfo"),n=e=>{for(;e.lastChild;)e.removeChild(e.lastChild)};return{updateToday:(e,d,r,s="none")=>{n(a),n(t),"US"===r?(a.appendChild(document.createTextNode(`${d}, ${s}`)),t.appendChild(document.createTextNode(e))):(a.appendChild(document.createTextNode(`${d}, ${r}`)),t.appendChild(document.createTextNode(e)))},create:a=>{for(let t=0;t<a.length-1;t++){const d=Array.from(e.children)[t],n=a[t].dateNumber,r=a[t].weatherVag,s=a[t].weatherDes,i=Math.round(a[t].dayTemp),o=Math.round(a[t].nightTemp);let c=document.createElement("i");switch(r){case"Thunderstorm":c.classList.add("wi","wi-thunderstorm");break;case"Drizzle":c.classList.add("wi","wi-showers");break;case"Rain":c.classList.add("wi","wi-rain");break;case"Clear":c.classList.add("wi","wi-day-sunny");break;case"Clouds":"scattered clouds"===s?c.classList.add("wi","wi-cloudy"):c.classList.add("wi","wi-day-cloudy");break;case"Mist":c.classList.add("wi","wi-sprinkle");break;case"Smoke":c.classList.add("wi","wi-smoke");break;case"Haze":c.classList.add("wi","wi-day-haze");break;case"Dust":c.classList.add("wi","wi-dust");break;case"Fog":c.classList.add("wi","wi-fog");break;case"Sand":case"Ash":c.classList.add("wi","wi-sandstorm");break;case"Tornado":c.classList.add("wi","wi-tornado");break;default:c=document.createElement("i"),c.classList.add("wi","wi-na")}const l=document.createElement("div");l.classList.add("tempDiv"),l.appendChild(document.createTextNode(`${i}/${o}`)),d.appendChild(document.createTextNode(n)),d.appendChild(c),d.appendChild(l)}},remove:()=>{d.forEach((e=>{n(e)}))}}})(),a=(console.log("finding datestuffs"),{futureDate:e=>{const a=new Date,t=new Date(a),d=t.getDate()+e;return t.setDate(d),[["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][t.getDay()],`${t.getMonth()+1}/${t.getDate()}`]}}),t=async(e,a)=>{const t=`https://api.openweathermap.org/data/2.5/onecall?lat=${e}&lon=${a}&exclude=current,hourly,minutely,alerts&units=imperial&appid=daab30e51d1d719de2096678f035d4bf`;try{const e=await fetch(t,{mode:"cors"}),a=await e.json();return new Promise(((e,t)=>e(a)))}catch(e){return new Promise(((a,t)=>t(e)))}},d=async(e,a,t)=>{let d;d="US"===a?`http://api.openweathermap.org/geo/1.0/direct?q=${e},${t},${a}&limit=1&appid=daab30e51d1d719de2096678f035d4bf`:`http://api.openweathermap.org/geo/1.0/direct?q=${e},${a}&limit=1&appid=daab30e51d1d719de2096678f035d4bf`;try{const e=await fetch(d,{mode:"cors"}),a=await e.json();return new Promise(((e,t)=>e(a)))}catch(e){return new Promise(((a,t)=>t(e)))}},n=async(e,a,t)=>{let d;d="US"===a?`http://api.openweathermap.org/data/2.5/weather?q=${e},${t},${a}&units=imperial&appid=daab30e51d1d719de2096678f035d4bf`:`http://api.openweathermap.org/data/2.5/weather?q=${e},${a}&units=imperial&appid=daab30e51d1d719de2096678f035d4bf`;try{const e=await fetch(d,{mode:"cors"}),a=await e.json();return new Promise(((e,t)=>e(a)))}catch(e){return new Promise(((a,t)=>t(e)))}},r=async(r,s,i="none")=>{try{const o=await(async(e,a,t="none")=>{try{const n=await d(e,a,t);return[n[0].lat,n[0].lon]}catch(e){console.error(e)}})(r,s,i),c=await(async(e,a)=>{try{return await t(e,a)}catch(e){console.error(e)}})(o[0],o[1]),l=await(async e=>{const t=e.daily,d=[];for(const e in t){const n=a.futureDate(parseInt(e));d.push({dayName:n[0],dateNumber:n[1],dayTemp:t[e].temp.day,nightTemp:t[e].temp.night,weatherVag:t[e].weather[0].main,weatherDes:t[e].weather[0].description})}return d})(c),u=await(async(e,a,t="none")=>{try{return(await n(e,a,t)).main.temp}catch(e){console.error("err")}})(r,s,i);e.remove(),e.create(l),e.updateToday(u,r,s,i)}catch(e){console.error(e)}};document.querySelectorAll(".indivInfo").forEach((e=>{const a=document.createElement("i");a.classList.add("arrow-down"),e.addEventListener("mouseover",(()=>{e.appendChild(a)})),e.addEventListener("mouseout",(()=>{e.removeChild(a)}))})),(()=>{const e=document.getElementById("searchContainer"),a=document.getElementById("searchInput");e.addEventListener("submit",(e=>{e.preventDefault();const t=a.value.split(", ");3===t.length?r(t[0],t[2],t[1]):r(t[0],t[1]),a.value=""}))})(),r("London","GB")})();