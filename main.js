(()=>{"use strict";const e=(()=>{const e=document.getElementById("infoContainer"),a=document.getElementById("cityTitle"),t=document.getElementById("weatherTitle"),d=document.querySelectorAll(".indivInfo"),n=e=>{for(;e.lastChild;)e.removeChild(e.lastChild)};return{updateToday:(e,d,s,o="none")=>{n(a),n(t),"US"===s?(a.appendChild(document.createTextNode(`${d}, ${o}`)),t.appendChild(document.createTextNode(e))):(a.appendChild(document.createTextNode(`${d}, ${s}`)),t.appendChild(document.createTextNode(e)))},create:a=>{for(let t=0;t<a.length-1;t++){const d=Array.from(e.children)[t],n=a[t].dateNumber,s=a[t].weatherVag,o=a[t].weatherDes,r=Math.round(a[t].dayTemp),i=Math.round(a[t].nightTemp);let c=document.createElement("i");switch(s){case"Thunderstorm":c.classList.add("wi","wi-thunderstorm");break;case"Drizzle":c.classList.add("wi","wi-showers");break;case"Rain":c.classList.add("wi","wi-rain");break;case"Clear":c.classList.add("wi","wi-day-sunny");break;case"Clouds":"scattered clouds"===o?c.classList.add("wi","wi-cloudy"):c.classList.add("wi","wi-day-cloudy");break;case"Mist":c.classList.add("wi","wi-sprinkle");break;case"Smoke":c.classList.add("wi","wi-smoke");break;case"Haze":c.classList.add("wi","wi-day-haze");break;case"Dust":c.classList.add("wi","wi-dust");break;case"Fog":c.classList.add("wi","wi-fog");break;case"Sand":case"Ash":c.classList.add("wi","wi-sandstorm");break;case"Tornado":c.classList.add("wi","wi-tornado");break;default:c=document.createElement("i"),c.classList.add("wi","wi-na")}const l=document.createElement("div");l.classList.add("tempDiv"),l.appendChild(document.createTextNode(`${r}/${i}`)),d.appendChild(document.createTextNode(n)),d.appendChild(c),d.appendChild(l)}},remove:()=>{d.forEach((e=>{n(e)}))}}})(),a=(console.log("finding datestuffs"),{futureDate:e=>{const a=new Date,t=new Date(a),d=t.getDate()+e;return t.setDate(d),[["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][t.getDay()],`${t.getMonth()+1}/${t.getDate()}`]}}),t=async(e,a)=>{const t=`https://api.openweathermap.org/data/2.5/onecall?lat=${e}&lon=${a}&exclude=current,hourly,minutely,alerts&units=imperial&appid=daab30e51d1d719de2096678f035d4bf`;try{const e=await fetch(t,{mode:"cors"}),a=await e.json();return new Promise(((e,t)=>e(a)))}catch(e){return new Promise(((a,t)=>t(e)))}},d=async(e,a,t)=>{let d;d="US"===a?`http://api.openweathermap.org/geo/1.0/direct?q=${e},${t},${a}&limit=1&appid=daab30e51d1d719de2096678f035d4bf`:`http://api.openweathermap.org/geo/1.0/direct?q=${e},${a}&limit=1&appid=daab30e51d1d719de2096678f035d4bf`;try{const e=await fetch(d,{mode:"cors"}),a=await e.json();return new Promise(((e,t)=>e(a)))}catch(e){return new Promise(((a,t)=>t(e)))}},n=async(e,a,t)=>{let d;d="US"===a?`http://api.openweathermap.org/data/2.5/weather?q=${e},${t},${a}&units=imperial&appid=daab30e51d1d719de2096678f035d4bf`:`http://api.openweathermap.org/data/2.5/weather?q=${e},${a}&units=imperial&appid=daab30e51d1d719de2096678f035d4bf`;try{const e=await fetch(d,{mode:"cors"}),a=await e.json();return new Promise(((e,t)=>e(a)))}catch(e){return new Promise(((a,t)=>t(e)))}},s=async(a,t,d="none")=>{await n(a,t,d).then((n=>{const s=n.main.temp;e.updateToday(s,a,t,d)})).catch((e=>{console.error(e)}))},o=async(n,s,o="none")=>{await d(n,s,o).then((d=>{console.log(d[0]),(async(d,n)=>{await t(d,n).then((t=>{(async t=>{const d=t.daily,n=[];for(const e in d){const t=a.futureDate(parseInt(e));n.push({dayName:t[0],dateNumber:t[1],dayTemp:d[e].temp.day,nightTemp:d[e].temp.night,weatherVag:d[e].weather[0].main,weatherDes:d[e].weather[0].description})}console.log(n),e.remove(),e.create(n)})(t)})).catch((e=>{console.error(e)}))})(d[0].lat,d[0].lon)})).catch((e=>{console.error(e)}))};document.querySelectorAll(".indivInfo").forEach((e=>{const a=document.createElement("i");a.classList.add("arrow-down"),e.addEventListener("mouseover",(()=>{e.appendChild(a)})),e.addEventListener("mouseout",(()=>{e.removeChild(a)}))}));const r=document.getElementById("searchContainer"),i=document.getElementById("searchInput");r.addEventListener("submit",(a=>{a.preventDefault();const t=i.value.split(", ");3===t.length?(o(t[0],t[2],t[1]),e.updateToday(t[0],t[2],t[1]),s(t[0],t[2],t[1])):(o(t[0],t[1]),e.updateToday(t[0],t[1]),s(t[0],t[1])),i.value=""})),o("London","GB"),e.updateToday("London","GB")})();