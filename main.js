(()=>{"use strict";const e=(()=>{const e=document.querySelectorAll(".indivInfo"),t=document.getElementById("infoContainer"),a=document.getElementById("expandedContainer"),d=document.getElementById("cityTitle"),n=document.getElementById("weatherTitle"),r=e=>{for(;e.lastChild;)e.removeChild(e.lastChild)};return{updateToday:(e,t,a,s)=>{r(d),r(n),t=t.charAt(0).toUpperCase()+t.slice(1),"US"===a?(s=s.toUpperCase(),d.appendChild(document.createTextNode(`${t}, ${s}`))):(a=a.toUpperCase(),d.appendChild(document.createTextNode(`${t}, ${a}`))),n.appendChild(document.createTextNode(`${e} FÂ°`))},updateExpanded:e=>{const t=e.charAt(0).toUpperCase()+e.slice(1);a.appendChild(document.createTextNode(t))},create:e=>{for(let a=0;a<e.length-1;a++){const d=Array.from(t.children)[a],n=e[a].dateNumber,r=e[a].weatherVag,s=e[a].weatherDes,i=Math.round(e[a].dayTemp),o=Math.round(e[a].nightTemp);let c=document.createElement("i");switch(r){case"Thunderstorm":c.classList.add("wi","wi-thunderstorm");break;case"Drizzle":c.classList.add("wi","wi-showers");break;case"Rain":"light rain"===s?c.classList.add("wi","wi-showers"):c.classList.add("wi","wi-rain");break;case"Clear":c.classList.add("wi","wi-day-sunny");break;case"Clouds":"broken clouds"===s?c.classList.add("wi","wi-cloudy"):c.classList.add("wi","wi-day-cloudy");break;case"Mist":c.classList.add("wi","wi-sprinkle");break;case"Smoke":c.classList.add("wi","wi-smoke");break;case"Haze":c.classList.add("wi","wi-day-haze");break;case"Dust":c.classList.add("wi","wi-dust");break;case"Fog":c.classList.add("wi","wi-fog");break;case"Sand":case"Ash":c.classList.add("wi","wi-sandstorm");break;case"Tornado":c.classList.add("wi","wi-tornado");break;default:c=document.createElement("i"),c.classList.add("wi","wi-na")}const l=document.createElement("div");l.classList.add("tempDiv"),l.appendChild(document.createTextNode(`${i}/${o}`)),d.appendChild(document.createTextNode(n)),d.appendChild(c),d.appendChild(l)}},remove:t=>{"infoContainer"===t?e.forEach((e=>{r(e)})):"expandedContainer"===t&&r(a)}}})(),t=(console.log("finding datestuffs"),{futureDate:e=>{const t=new Date,a=new Date(t),d=a.getDate()+e;return a.setDate(d),[["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][a.getDay()],`${a.getMonth()+1}/${a.getDate()}`]}}),a=async(e,t)=>{const a=`https://api.openweathermap.org/data/2.5/onecall?lat=${e}&lon=${t}&exclude=current,hourly,minutely,alerts&units=imperial&appid=daab30e51d1d719de2096678f035d4bf`;try{const e=await fetch(a,{mode:"cors"});return await e.json()}catch(e){Promise.reject(e)}},d=async(e,t,a)=>{let d;d="US"===t?`http://api.openweathermap.org/geo/1.0/direct?q=${e},${a},${t}&limit=1&appid=daab30e51d1d719de2096678f035d4bf`:`http://api.openweathermap.org/geo/1.0/direct?q=${e},${t}&limit=1&appid=daab30e51d1d719de2096678f035d4bf`;try{const e=await fetch(d,{mode:"cors"});return await e.json()}catch(e){Promise.reject(e)}},n=async(e,t,a)=>{let d;d="US"===t?`http://api.openweathermap.org/data/2.5/weather?q=${e},${a},${t}&units=imperial&appid=daab30e51d1d719de2096678f035d4bf`:`http://api.openweathermap.org/data/2.5/weather?q=${e},${t}&units=imperial&appid=daab30e51d1d719de2096678f035d4bf`;try{const e=await fetch(d,{mode:"cors"});return await e.json()}catch(e){Promise.reject(e)}};let r;const s=async(s,i,o)=>{try{const c=await(async(e,t,a)=>{try{const n=await d(e,t,a);return[n[0].lat,n[0].lon]}catch(e){Promise.reject(e)}})(s,i,o),l=await(async(e,t)=>{try{return await a(e,t)}catch(e){Promise.reject(e)}})(c[0],c[1]),p=await(async e=>{const a=e.daily,d=[];for(const e in a){const n=t.futureDate(parseInt(e));d.push({dayName:n[0],dateNumber:n[1],dayTemp:a[e].temp.day,nightTemp:a[e].temp.night,weatherVag:a[e].weather[0].main,weatherDes:a[e].weather[0].description})}return r=d,d})(l),m=await(async(e,t,a)=>{try{return(await n(e,t,a)).main.temp}catch(e){Promise.reject(e)}})(s,i,o);e.updateToday(m,s,i,o),e.remove("infoContainer"),e.create(p)}catch(e){console.error("err",e)}};document.querySelectorAll(".indivInfo").forEach((t=>{const a=document.createElement("i");a.classList.add("arrow-down"),t.addEventListener("mouseover",(()=>{t.appendChild(a);const d=Array.from(t.parentNode.children).indexOf(t),n=r[d].weatherDes;e.remove("expandedContainer"),e.updateExpanded(n)})),t.addEventListener("mouseout",(()=>{t.removeChild(a)}))})),(()=>{const e=document.getElementById("searchContainer"),t=document.getElementById("searchInput");e.addEventListener("submit",(e=>{e.preventDefault();const a=t.value.split("/"),d=a.length;3===d||2===d?(3===d?s(a[0],a[2],a[1]):s(a[0],a[1]),t.value=""):d>3?t.setCustomValidity("3 inputs max."):t.setCustomValidity("2 inputs min.")}))})(),s("London","GB")})();