(()=>{"use strict";const e=(()=>{const e=document.getElementById("infoContainer"),t=document.getElementById("cityTitle"),a=document.getElementById("weatherTitle"),d=document.querySelectorAll(".indivInfo"),n=e=>{for(;e.lastChild;)e.removeChild(e.lastChild)};return{updateToday:(e,d,r,s="none")=>{n(t),n(a),"US"===r?(t.appendChild(document.createTextNode(`${d}, ${s}`)),a.appendChild(document.createTextNode(e))):(t.appendChild(document.createTextNode(`${d}, ${r}`)),a.appendChild(document.createTextNode(e)))},create:t=>{for(let a=0;a<t.length-1;a++){const d=Array.from(e.children)[a],n=t[a].dateNumber,r=t[a].weatherVag,s=t[a].weatherDes,o=Math.round(t[a].dayTemp),i=Math.round(t[a].nightTemp);let c=document.createElement("i");switch(r){case"Thunderstorm":c.classList.add("wi","wi-thunderstorm");break;case"Drizzle":c.classList.add("wi","wi-showers");break;case"Rain":c.classList.add("wi","wi-rain");break;case"Clear":c.classList.add("wi","wi-day-sunny");break;case"Clouds":"scattered clouds"===s?c.classList.add("wi","wi-cloudy"):c.classList.add("wi","wi-day-cloudy");break;case"Mist":c.classList.add("wi","wi-sprinkle");break;case"Smoke":c.classList.add("wi","wi-smoke");break;case"Haze":c.classList.add("wi","wi-day-haze");break;case"Dust":c.classList.add("wi","wi-dust");break;case"Fog":c.classList.add("wi","wi-fog");break;case"Sand":case"Ash":c.classList.add("wi","wi-sandstorm");break;case"Tornado":c.classList.add("wi","wi-tornado");break;default:c=document.createElement("i"),c.classList.add("wi","wi-na")}const l=document.createElement("div");l.classList.add("tempDiv"),l.appendChild(document.createTextNode(`${o}/${i}`)),d.appendChild(document.createTextNode(n)),d.appendChild(c),d.appendChild(l)}},remove:()=>{d.forEach((e=>{n(e)}))}}})(),t=(console.log("finding datestuffs"),{futureDate:e=>{const t=new Date,a=new Date(t),d=a.getDate()+e;return a.setDate(d),[["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][a.getDay()],`${a.getMonth()+1}/${a.getDate()}`]}}),a=async(e,t)=>{const a=`https://api.openweathermap.org/data/2.5/onecall?lat=${e}&lon=${t}&exclude=current,hourly,minutely,alerts&units=imperial&appid=daab30e51d1d719de2096678f035d4bf`;try{const e=await fetch(a,{mode:"cors"}),t=await e.json();return new Promise(((e,a)=>e(t)))}catch(e){return new Promise(((t,a)=>a(e)))}},d=async(e,t,a)=>{let d;d="US"===t?`http://api.openweathermap.org/geo/1.0/direct?q=${e},${a},${t}&limit=1&appid=daab30e51d1d719de2096678f035d4bf`:`http://api.openweathermap.org/geo/1.0/direct?q=${e},${t}&limit=1&appid=daab30e51d1d719de2096678f035d4bf`;try{const e=await fetch(d,{mode:"cors"}),t=await e.json();return new Promise(((e,a)=>e(t)))}catch(e){return new Promise(((t,a)=>a(e)))}},n=async(e,t,a)=>{let d;d="US"===t?`http://api.openweathermap.org/data/2.5/weather?q=${e},${a},${t}&units=imperial&appid=daab30e51d1d719de2096678f035d4bf`:`http://api.openweathermap.org/data/2.5/weather?q=${e},${t}&units=imperial&appid=daab30e51d1d719de2096678f035d4bf`;try{const e=await fetch(d,{mode:"cors"}),t=await e.json();return new Promise(((e,a)=>e(t)))}catch(e){return new Promise(((t,a)=>a(e)))}},r=async(r,s,o="none")=>{try{const n=await(async(e,t,a="none")=>{try{const n=await d(e,t,a);return[n[0].lat,n[0].lon]}catch(e){console.error(e)}})(r,s,o);try{const d=await(async(e,t)=>{try{return await a(e,t)}catch(e){console.error(e)}})(n[0],n[1]);try{await(async a=>{const d=a.daily,n=[];for(const e in d){const a=t.futureDate(parseInt(e));n.push({dayName:a[0],dateNumber:a[1],dayTemp:d[e].temp.day,nightTemp:d[e].temp.night,weatherVag:d[e].weather[0].main,weatherDes:d[e].weather[0].description})}console.log(n),e.remove(),e.create(n)})(d)}catch(e){console.err(e)}}catch(e){console.err(e)}}catch(e){console.err(e)}await(async(t,a,d="none")=>{await n(t,a,d).then((n=>{const r=n.main.temp;e.updateToday(r,t,a,d)})).catch((e=>{console.error(e)}))})(r,s,o)};document.querySelectorAll(".indivInfo").forEach((e=>{const t=document.createElement("i");t.classList.add("arrow-down"),e.addEventListener("mouseover",(()=>{e.appendChild(t)})),e.addEventListener("mouseout",(()=>{e.removeChild(t)}))})),(()=>{const e=document.getElementById("searchContainer"),t=document.getElementById("searchInput");e.addEventListener("submit",(e=>{e.preventDefault();const a=t.value.split(", ");3===a.length?r(a[0],a[2],a[1]):r(a[0],a[1]),t.value=""}))})(),r("London","GB")})();